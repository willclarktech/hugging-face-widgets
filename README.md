# Hugging Face Widgets

Widgets which interact with the [Hugging Face inference API](https://api-inference.huggingface.co/front/).

A live version can be found [here](https://willclark.tech/hugging-face-widgets/).

## Widgets

### Gender Bias

This widget was inspired by [this demo](https://demo.allennlp.org/masked-lm?text=The%20doctor%20ran%20to%20the%20emergency%20room%20to%20see%20%5BMASK%5D%20patient) from the Allen Institute for AI. Whereas that demo is intended to display the model’s predictions for a masked word in a general way, I wanted a way to view predictions related to gendered masked words such that the biases of the model would be easier to see at a glance.

### Zero-Sided Conversation

This widget makes use of two models. One is on the server, providing text generation (which gets fed back into itself to generate the next output). The second model is on the client, and it assesses the "toxicity" of each bit of text generated by the server model. The client model is provided by [TensorFlow.js’s toxicity classifier](https://github.com/tensorflow/tfjs-models/tree/master/toxicity).

## Local development

### Requirements

- Node.js v12 (untested with other versions)
- npm v6 (untested with other versions)
- Chrome browser (untested on other browsers)

### Installation

```
git clone git@github.com:willclarktech/hugging-face-widgets.git
npm install
```

### Starting the development server

```
npm start
```

Then visit [http://localhost:1234]().

### Building a production version

```
npm run build
```

This builds in the `./docs` directory ready for deployment to GitHub Pages, but could be deployed anywhere else (but note that the Parcel flags in `package.json` would have to be adjusted).

## TODO

- Improve styling
- Cross-browser testing
- Add more models
- Make promises cancellable to avoid trying to set state after components have unmounted (see [this blogpost](https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html))
- Improve modelling of models (e.g. make humanization of model responses specific to the API endpoint)
- Find out why `tsc` is complaining about TensorFlow even though `skipLibCheck` is set to `true`
- Enable automatic widget selection/model selection/text fill via GET parameters
- Tests!
